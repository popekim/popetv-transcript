음 오늘은 이제 웹 프로그래밍 웹 프로그래머들을 위해서 이제 제가 최근에 쓰고 있는 서비스를 하나 소개하려고 해요
어찌보면 다들 알고 계실 수도 있고 혹시 모르시는 분들이 있으면 좀 알아서 쓰셨으면 좋을 것 같고 이거를
아 그리고 혹시라도 알고는 있었는데 이런 다른 기능이 있다라는 걸 모르시는 분들이 있어도 좀 쓰시면 좋을 것 같아요
클라우드 플레어라는 그런 서비스에요 클라우드 플레어 닷컴 가면 있어요
이걸 처음 얘기하면 뭐하는 회사냐 라고 말씀하시는 분들이 있었는데 저도 몰랐거든요
제가 이거를 이제 눈치채기 시작했던 게 그 크립토 이제 커런시 쪽 그러니까 암호화폐 쪽이죠
암호화폐 쪽에 이제 인기가 높아지면서 뭐 마이닝이라던가 아니면 암호화폐 관련 웹사이트들이 굉장히 트래픽이 몰리고
어찌 보면 굉장히 공급되고
공격의 대상이 되기도 했어요 뭐 디도스 어택도 있었고 기타 등등
그래서 그런지 몰라도 제가 로그인할 때마다 가끔 클라우드 플레어 로고가 뜨면서
아 니 브라우저가 안전한지 확인해 볼게 뭐 니 뭐 이게 문제가 없는지 체크 중이야 이러고 나오다가 갑자기 그 사이트에 들어가는 경우가 있었고
그 다음에 어느 순간에는 아 그 사이트가 다운이 됐는데 클라우드 플레어에 캐시된 그때 버전을 보여줄게 캐시된 버전을 보여줄게 하고
실제 보여주는 거예요 그러면서
라이브 사이트 한 번 다시
시도하고 싶으면 이 버튼 눌러봐 이런 식으로
그래서 이게 뭐지 하고 보다 보니까
되게 재밌는 서비스더라구요
그리고 어찌보면은
이제 제가 만드는 웹사이트라던가 이런 거를 만들 때
반드시 클라우드 플레어로 꼽을 것 같다는 생각이 했어요
그게 왜냐면 지금 여러 가지 이유가 있는데
어디부터 시작해야 될까
첫 번째 이거부터 시작을 할게요
웹 이제 도메인을 사서 제 서버을 두고 이제 호스팅을 하면은 보통
dns 서버 도메인 네임 서버 겠죠
도메인 네임 서버에 제 서버가 있는 ip 주소라던가 이런 걸 놓아야 돼요
그리고 도메인 네임 서버는 기본적으로
일단 공개된 자료기 때문에
제가 그 서버를 올리는 순간
그 dns 엔트리를 올리는 순간
제 서버가 어디 있고 ip 주소를 어디 있는지가 공개가 되게 돼 있어요
근데 그게 이제 보안상의 문제가 될 수도 사실은 있거든요
그 서버가 어디 있느냐에 따라 이 서버가 뭔가 older이고요

뭐 클라우드 프로바이더에 있는 서버라면은 뭐
아 뭐 걔네 서버 IP가 이미 알려진 거고
뭐 걔네 이제 뭐 어택 들어가는 거 걔네가 처리할 거니까 상관이 없는데
그 외에 그 서버가 제 집에 있다거나
아니면은 제가 딴 데서 호스팅 그냥 서버를 사서 제가 설정을 하는 거라면은
제가 그런 거를 잘 못할 수가 있잖아요
그럼 어쨌든 간에 IP 주소가 공개되는 거는
그렇게 반가운 일은 아닐 수가 있어요
그러면은 그 클라우드 플레어는 이런 DNS 서비스를 제공하는 서비스인데
기본적으로 그걸 1번이라고 할게요
그럼 제가 도메인을 산 다음에 네임 서버 주소를 적을 때
클라우드 플레어를 적고 거기서 DNS를 관리할 수가 있어요
그러면 다른 도메인에서 하는 거랑 똑같이
이제 제가 아 여기 뭐 WWW 포큐달 아카데미로 들어오는 서버는
이 IP 주소로 보내면 된다 이런 식으로 세팅을 하잖아요
근데 클라우드 플레어는
그 IP 주소를 숨겨주는 기능이 있는 거예요
어떻게 보면 그래서 실제 사람들이 DNS 레코드를 보면은
순수하게 아 이 DNS는 클라우드 플레어 서버의 IP 주소를 가리키고 있어
그게 나오는 게 전부지만
실제 유저가 클라우드 그 도메인을 쳐서 들어가면은
클라우드 서버 클라우드 플레어의 그 서버에 접속을 하고
그 서버는 다시 실 서버에 접속을 해서 모든 트래픽을 리드렉트 해주는 개념이에요
그래서 공개적으로 보일 때는
모든 게 클라우드 플레어에서 나가는 거 같지만
사실은 클라우드 플레어에서 플라워가 플레어가 서버와 유저
브라우저 사이 중간에 하나의 레이어를 만들어 주는 거예요
어떻게 보면은 저희 뭐 예전에 마이크로 서비스 아키텍처 만들 때
뭐 API 게이트웨이 이런 비슷한 걸 만들기도 하잖아요
뭐 그게 반드시 이런 1:1 리드렉트는 아니지만
그거의 일부분의 개념이라도 보면 맞아요
어찌보면은 서버와 유저 사이에 레이어 하나를 넣고
유저는 그 레이어하고만 연결됩니다.
그냥 통신을 한다
그럼 이게 장점이 뭐냐
이게 클라우드 플레어에서 제공하는 기능 중에 여러 가지가 이 장점에서 와요
첫 번째가 아까 말했듯이
실제 서버의 위치를 숨길 수 있다
그게 첫 번째에요
두 번째
DNS 서버도 그리고 실제 데이터 캐시라던가 이런 것도
이제 클라우드 플레어 땅에서 이제 제공을 하기 때문에
보통 DNS 데이터 엔트리 바꾸면은 업데이트 했는데 1시간 걸리고 30분 걸리고 이런 게 있잖아요
클라우드 플레어는 그게 거의 즉각적으로 업데이트가 돼요 사실은
그래서 왜냐면 그 클라우드 플레어 자체 서버 IP 조선 바뀌지 않으니까
거기서 딴 데로 리드렉트 되는 게 좀 바뀔 뿐이지
그래서 그런 장점
실제 이것저것 세팅하고 바꿀 때 곧바로 업데이트 될 수가 있다는 장점이 두 번째고
세 번째는 이게 솔직히 조금 재밌는 거였는데 저한테는
요즘 HTTPS로 가자 모든 거를
그리고 브라우저에서 이제 시큐어 레이어 아닌 것들
HTTP로 끝나는 거를 막겠다는 얘기도 많아요
그럼 또 서버에 설정하려면 거기다 뭐 Certificate 넣어야 되고 뭐 해야 되고 되게 복잡해요
뭐 Let's Encrypt 쓰더라도 공짜니까 그래도 좀 복잡한데
클라우드 플레어는 기본적으로 자기가 브라우저 연결할 때 무조건 HTTPS로 하되
자기 서버에서 저의 직접 서버 제가 갖고 있는 서버 연결할 때는 HTTP로 통신을 하기도 해줘요
물론 그게 보안상의 문제가 있고 클라우드 플레어를 얼마나 믿을 수 있고 이런 부분도 있지만
최소한 퍼블릭으로 나가는 것까지는 무조건 HTTPS로 바꿀 수가 있는 거예요
뒤에가 어떻든 간에
뒤에도 사실 HTTPS로 바꾸고 양쪽 다 올바른 Certificate 만들고 하는 게 올바른 방법이지만
뭐 당장 그냥 블로우 같은 거 대충 운영하고 이럴 때
아휴 HTTPS 안 된다고 에라 나고 막 여기서 여기서 난리치고
이럴 때 가장 간단하게 HTTPS 레이어를 올려버릴 수 있는 게 클라우드 플레어에 제공하는 기능을 쓰면 돼요
참고로 지금까지 말했던 모든 기능은 공짜예요
그리고 지금 앞으로 계속 말할 기능도 저는 공짜만 일단 소개할 거예요
공짜 외에 돈 내도 되는 게 있는데 일단은 공짜만 해도 충분해요
그래서 세 가지 장점이 있죠
또 하나의 장점 네 번째 장점
그 GEO LOCATING이 돼요
이게 뭐냐 사용자가 접속을 할 때 보통 그 사용자가 어느 IP 주소에서 오는지는 웹서버에서 받아올 수가 있어요
근데 이제 그 IP 주소를 가지고 이 사람이 어떤 나라에서 왔느냐
이런 거를 이제 하려면 뭐 IP 무슨 서비스도 사고 IP 주소가 찾아주는 서비스도 사고
뭐 아니면 내가 데이터베이스를 갖고 있어 확인해보고 뭐 이런 기타 등등의 방법이 있었거든요
근데 클라우드 플레이어는 기본적으로 모든 접속하는 유저 트래픽이죠 모든 리퀘스트에 대해서
이제 저희 쪽 서버로 리디렉트 해줄 때 거기 위에 헤더를 박아줘요 두 개를
하나가 어느 IP 주소에서 오는지 두 개를 박아줘요
두 번째가 어느 Country냐 그래서 실제 저희가 웹서버에서 어느 나라에서 온 사람이고
뭐 IP 주소가 뭐냐라고 볼 때 간단하게 헤더만 보는 방법으로 해결이 가능해요
그래서 이런 또 하나의 장점이 있죠 굉장히 편하고 물론 IP 주소가 막 프락시 타고 들어오고 뭐하고 그러면은
실제 유저의 IP 주소가 안 보이는 경우도 있어요 그걸 찾으려면 복잡한 이렇게 코드를 좀 짜야 되는데
클라우드 플레이어에서 돈을 내면요
돈을 내면 이제 이것도 실제 IP 주소를 주는 서비스가 있어요
제가 돈을 안 내봤기 때문에 아직 모르겠어요 개인적으로는
어쨌든 그게 네 가지고 뭐 그 외에 굉장히 다 여러 가지의 이제 기능들이 있어요
그 중간단에서 넣어서 할 수 있는 것들 지금부터는 제가 확실하게 써보질 않았기 때문에
이게 유료인지 무료인지 모르겠지만 그 IP White Listing이라고 있죠 Black Listing 이 IP에서 오는 주소는 아예 접속이 안 되게 막겠다
이런 것도 있어요
그게 이제 하나고 아 그 전에 꽁짜 기능 하나 더 말해야 되나 꽁짜 기능 하나 더 말하고 갈게요
그게 낫겠다 꽁짜를 앞에 묶는 게 나을 거 같아
다섯 번째 꽁짜 기능은요 CDN을 자동으로 제공해줘요 한마디로
그러니까 클라우드 플레이어 서버가 굉장히 전 세계에 많이 퍼져 있대요
그럼 저는 서버에서 뭐 JPEG을 주거나 뭐 HTML을 주거나 이런 파일을 주잖아요
그러면 클라우드 플레이어는 자기네 서버 쪽에 CDN을 구축을 하는 거예요 그 파일들을 갖다가
그래서 실제 리퀘스트가 들어와도 저희 쪽에서 곧바로 가져가는 게 아니라
지네가 캐시해놓은 거를 쓸 수 있으면 자기 서버에서 그냥 보내버려요
그래서 내 서버가 한국에 있을지라도 클라우드 플레이어는 미국에도 이제 CDN 데이터 센터가 있기 때문에
그쪽에서 캐시된 버전을 보여주는 것만으로도 딜레이가 줄어들기 때문에 굉장히 빠른 웹사이트가 만들 수 있어요
미국에서 접속을 하더라도 그런 장점이 있고 그리고 그런 캐시를 해놨기 때문에 여섯 번째 장점으로는
제 서버가 잠시 다운이 되더라도 최근에 캐시된 버전을 보여줄 수가 있죠
그래서 그런 여섯 가지 이제 공짜 기능을 제가 설명할 수 있고 그 외에 다양한 기능을 아까 말했듯이
음 뭐 IP 주소를 실제 IP로 돌려줄 수 있다 그리고 IP 블랙리스팅이 가능하다
그리고 URL 스트럭처 따라 뭐 이 URL 도메인 나오고 어쩌고 슬래시가 나오면 이거를 여기를 리디렉트하고 저기를 리디렉트하고 이런 식의 약간 버추얼 호스팅 개념도
그리고 URL 스트럭처 따라 뭐 이 URL 도메인 나오고 어쩌고 슬래시가 나오면 이거를 여기를 리디렉트하고 저기를 리디렉트하고 이런 식의 약간 버추얼 호스팅 개념도
넣을 수가 있어요 그리고 어찌보면은 최근에 나온 기능일 수도 있고 제가 최근에 본 기능일 수도 있는데
클라우드 플레어 워커라는 그런 개념이 있어요 이거는 당연히 돈 내야 되는 서비스로 생각을 하는데
이게 뭐냐 한마디로 모든 트래픽에 대해서 이 트래픽을 받아서 이걸 처리할 수 있는 프로그램 한마디로 계속 도는 워커를 설치를 하는 거예요
그러면 내가 정말 트래픽에 따라 이게 무슨 고정되어 있는지 모르겠는데
공격인지 뭔지 스스로 판단을 할 수도 있잖아요 그 판단하는 로직을 그 워커에 두고 그럼 두면은 모든 트래픽을 제가 분석을 하면서
그거에 따라 이제 제가 원하는 행동을 할 수가 있다는 거죠 뭐 여기서 갑자기 뭐 IP 주소에서 엄청나게 트래픽이 몰리고
뭐 이런 저런 일이 일어난다 그러면 제가 그거를 블록할 수도 있는 거고 아니면
그거에 따라 다른 데로 리디렉트 할 수도 있겠고 그런 다양한 일 분석을 할 수 있는 워커를 넣을 수가 있어요 그래서 그것도 어찌보면 굉장히 파워풀한 기능이라고 생각을 하는데
제가 아직 어떻게 써야 되는지는 100% 모르겠고 아직 쓸 일도 없었지만 그런 로직을 돌릴 수 있는 방법도 있다
그래서 그 정도가 제가 여태까지 클라우드 플레이어를 보면서 아 이거 괜찮네 어 저거 괜찮네 이거 괜찮네 하고 하면서 봤던 기능이에요
뭐 이제 그 외에도 굉장히 많은 게 있어요 제가 다 읽어본 것도 아니고 제가 다 써본 것도 아니기 때문에 근데 어쨌든 간에 클라우드 플레이어는 제가 처음에 말했던 꼼짝이는 다섯 여섯 가지만으로도 거의 모든 웹사이트에서 쓸 수 있을 수도 있고
쓰는 게 나쁘지 않다고 생각이 될 정도라는 거죠
뭐 디도스 공격 오면 진행하러 막아줄 거고
뭐 이상한 짓 하면은 또 진행하러 막아줄 거고
자기네 자체에서 이제 그런
뭐 디텍션하는 그런 알고리즘이 있으니까
그러나 장점을 다 얘기했지만
단점은 또 뭐냐
모든 트래픽이 클라우드 플레어를 통해 가는 거예요
클라우드 플레어에 있는 웹사이트
그러니까 레이어죠
그거랑 유저가 통신할 때도
걔네의 Certificate과 유저의 Certificate을 쓰는 거죠
그래서 결과적으로는 얘네가 그 Certificate을 갖고 있기 때문에
트래픽 분석도 가능하고
그럼 모든 트래픽을 읽을 수가 있어요 사실은
그래서 클라우드 플레어가 정말 장난짓을 치려고 한다
그러면 충분히 모든 데이터를 훔쳐가서
Unsecured한 데이터를, 아니 HTTP랑 다를 게 없는 거죠
왜냐면 모든 게 플레인 텍스트로 보인다고 보면
맞으니까 거기서
그걸 다 가져가서 장난을 칠 수가 있다는 거
그런 단점은 분명히 있어요 그죠
그래서
그리고 이제 클라우드 플레어가 털리면
이제 모두가 털린다라는 것도 있죠
실제로 얼마 전에 클라우드 플레어
클라우드 블리드였나 플레어 블리드였나 하는 취약점이 발견돼서
굉장히 많은 정보가 노출했다는 얘기가 있었죠 사실은
그래서 그런 단점들은 여전히 있어요
하지만 과연 내가 스스로 그런 Security 스택을 쌓아도
걔네보다 잘 쌓을 수 있을까라고 생각하면
아마 아닐 거라고 생각합니다
그렇다고 생각을 하죠
거기에 인력을 그렇게 퍼부을 여력이 없는 회사도 많고
당연히 은행이나 이런 데에서는 안 쓰는 게 맞겠지만
좀 그렇잖아요
따로 제3자가 내 트래픽을 볼 수 있을 수도 있다
그거 갖고 장난칠 수 있다고 생각하는 게
그런 게 아니라
그 외의 것, 일반적인 서비스들
이런 거라면 충분히 클라우드 플레어로 꼽는 거에도
충분한 장점이 있다
클라우드 플레어 맞지 근데? 잠깐만 맞아요 어 제가 이름이 헷갈렸는데
왜냐면은
그 그런 똑같은 이유로 이제 마이닝 회사
비코인 마이닝 회사인 해시플레어도 클라우드 플레어를 앞단에 꼽았어요
둘 다 플레어로 끝나니까 제가 해시플레어를 클라우드 플레어를 잘못 말했나
이 고민을 했는데 아니네요
그래서 클라우드 플레어를 보신 적이 없다면 가서 한 번씩 보시길 바라고요
그리고 최소한 DNS의 IP 주소를 숨기는 용도만으로도
저는 충분히 값어치가 있다고 보고
그리고 아까 말했던 DNS가 곧바로 업로드가 되기 때문에


그리고 거기 데시보드 가면 캐시된 버전 곧바로 막 플러시 해버리고 이런 경우도 있거든요
그래서 개발할 때도 굉장히 빨라요 사실은
그런 장점은 충분히 있고
그리고 요즘 제가 이제 포큐 아카데미 쪽을 이제 생각을 하면서 봤던 게
어느 나라에서 오는 유저인지를 알아야겠다
그러면 예전에 제가 IP 갖고 막 GO IP GO LOCATION 했을 때는 되게 복잡했는데
아 클라우드 플레어가 어차피 헤더 값 주니까
이거 쓰면은 충분하게 나라는 구분이 가능하겠구나 나쁘지 않겠구나
이런 생각도 들었거든요. 그래서 클라우드 플레어가 어차피 헤더 값 주니까 이거 쓰면은 충분하게 나라는 구분이 가능하겠구나 나쁘지 않겠구나 이런 생각도 들었어요.
유저의 IP 주소를 저장하는 게 굉장히 큰 문제가 될 수가 있거든요
그리고 어찌 보면은
요번에 EU에서 GDP על 하면서
유저의 IP 주소를 저장하는 게 굉장히 큰 문제가 될 수가 있거든요
그럼 그런 경우에
아 유저의 IP 주소를 그냥 신경도 안 쓰고
그냥 내가
country만 받아오는 방법을 없을까?
그럴 때 이미 클라우드 플레어가
그걸 공짜로 헤더에 넣어주고 있는거야
그럼 아 Prince Chat는 괜찮네
그래서 그런 면에서
굉장히 많은 사람들이 이제 공짜로 쓰고 있을 것 같고
굉장히 많은 사람들이 이제 공짜로 쓰고 있을 것 같고
그리고 점점 더 사람들이 쓰는 사람이 많아지지 않을까 생각하는 서비스 중에 하나예요
그래서 정말 대기업에서 엄청난 시큐리티 팀이 있고
이런 회사가 아니라면은 내가 하는 스타트업
내가 하는 뭐 그렇게 돈이 왔다 갔다 많이 안 하는 플랫폼
이런 거에서는 충분히 써도 괜찮을 듯한 서비스
그래서 혹시 안 보신 분들이 있다면 어차피 공짜니까 보세요
UI도 굉장히 편하고 UX도 굉장히 편하고
정말 정말 정말 잘 만든 서비스라고 생각을 해요
목이 약간 쉴 정도로 강렬하게 얘기한 것 같은데
저는 한 푼도 안 봤지만
그리고 무슨 뭐 추천해갖고 포인트 받는 제도도 없는 서비스지만
제가 그냥 생각할 때 꽤 좋은 서비스다라고 말해서
장점을 쭉 말하고 단점을 조금 말했어요
그러면 그 정도로 줄이도록 하죠
네 포프였습니다
